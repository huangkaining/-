$def with(username,data,userau)
<html>
<head>
<meta charset="utf-8">
<title>学生数据分析平台</title>
	<script type="text/javascript" src="http://sandbox.runjs.cn/uploads/rs/202/4e4ejrix/jquery.min.js"></script>
	<script type="text/javascript" src="http://sandbox.runjs.cn/uploads/rs/202/4e4ejrix/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="http://sandbox.runjs.cn/uploads/rs/202/4e4ejrix/iconfont.css">
    <link rel="stylesheet" type="text/css" href="http://at.alicdn.com/t/font_587114_c1zqpia42s6k1emi.css">
    <link  rel="stylesheet" type="text/css" href="/static/css.css">
<style>
body{font:14px "微软雅黑","宋体","Arial Narrow",HELVETICA;-webkit-text-size-adjust:100%;}
</style>
</head>
<script type="text/javascript">

    </script>
<body style="background-color: #fff">
<script type="text/javascript" src="/static/leftlist.js"></script>
<script>
window.onload=function(){
	function createtable(){
           var tabledata = $:data;
            var div1=document.getElementById("body");
            var tb="<table class=\"table table-striped\" >";
            for (var j in tabledata){
                var obj = tabledata[j];
                tb+="<tr>";
                tb+="<td>" + obj.oneclass + "</td>";
                tb+="<td>" + obj.you +"%"+ "</td>";
                tb+="<td>" + obj.liang +"%"+ "</td>";
				tb+="<td>" + obj.zhong + "%"+ "</td>";
				tb+="<td>" + obj.cha + "%"+ "</td>";
                tb+="</tr>";
            }
            tb+="</table>";
            div1.innerHTML=tb;
        }
           

        function createchoice(){
            leftlist($userau);
        }
		createtable();
		createchoice();
	}
</script>
<div style="width:1500px;">
    <div class="nav" style="float:left;display:inline;">
        <div class="nav-top">
            <div id="mini" style="border-bottom:1px solid rgba(255,255,255,.1)"><img src="http://sandbox.runjs.cn/uploads/rs/202/4e4ejrix/mini.png" ></div>

        </div>
        <ul>
		<li class="nav-item">
                <a href="/main"><i class="iconfont icon-home"></i><span>首页</span></a>
            </li>
		<li class="nav-item">
                <a href="javascript:;"><i class="iconfont icon-yonghu1"></i><span>$username</span><i class="my-icon nav-more"></i></a>
                <ul>
                    <li><a href="/modify"><span>修改密码</span></a></li>
					<li><a href="/"><span>登出</span></a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a href="javascript:;"><i class="iconfont icon-chengji"></i><span>成绩与获奖</span><i class="my-icon nav-more"></i></a>

                <ul id="div1">

                </ul>
            </li>
            <li class="nav-item">
                <a href="javascript:;"><i class="icon iconfont">&#xe61f;</i><span>消费分析</span><i class="my-icon nav-more"></i></a>

                <ul id="div2">

                </ul>
            </li>
            <li class="nav-item">
                <a href="javascript:;"><i class="iconfont icon-deyutiandi"></i><span>德育分析</span><i class="my-icon nav-more"></i></a>

                <ul id="div3">

                </ul>
            </li>
			<li class="nav-item">
                <a href="javascript:;"><i class="iconfont icon-shetuanhuodong"></i><span>社团活动</span><i class="my-icon nav-more"></i></a>

                <ul id="div4">

                </ul>
            </li>
        </ul>
    </div>
		<div style="width:750px;float:left;margin:20px;display:inline;text-overflow: ellipsis; ">
		 <div id="main" style="height:400px"></div>
    <!-- ECharts单文件引入 -->
    <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
    <script type="text/javascript">
        // 路径配置
require.config({
            paths: {
                echarts: 'http://echarts.baidu.com/build/dist'
            }
        });
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar',
				'echarts/chart/line'// 使用柱状图就加载bar模块，按需加载
            ],

            function (ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('main'));

				var tabledata = $:data;
				var oneclass=new Array();
				for (var j in tabledata){
					var obj = tabledata[j];
					oneclass[j]=obj.oneclass;
				}
				var you=new Array();
				for (var j in tabledata){
					var obj = tabledata[j];
					you[j]=obj.you;
				}
				var liang=new Array();
				for (var j in tabledata){
					var obj = tabledata[j];
					liang[j]=obj.liang;
				}
				var zhong=new Array();
				for (var j in tabledata){
					var obj = tabledata[j];
					zhong[j]=obj.zhong;
				}
				var cha=new Array();
				for (var j in tabledata){
					var obj = tabledata[j];
					cha[j]=obj.cha;
				}



                var option = {
    title : {
        text: '班间卫生对比',
    },
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['优率','良率','中率','差率']
    },
    toolbox: {
        show : true,
        feature : {
            magicType : {show: true, type: ['line', 'bar']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            data : oneclass
        }
    ],
    yAxis : [
        {
            type : 'value'
        }
    ],
    series : [
        {
            name:'优率',
            type:'bar',
            data:you,
            markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
            },
            markLine : {
                data : [
                    {type : 'average', name: '平均值'}
                ]
            }
        },

        {
            name:'良率',
            type:'bar',
            data:liang,
            markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
            },
            markLine : {
                data : [
                    {type : 'average', name : '平均值'}
                ]
            }
        },

		{
		name:'中率',
            type:'bar',
            data:zhong,
            markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
            },
            markLine : {
                data : [
                    {type : 'average', name: '平均值'}
                ]
            }
        },

		{
		name:'差率',
            type:'bar',
            data:cha,
            markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
            },
            markLine : {
                data : [
                    {type : 'average', name: '平均值'}
                ]
            }
        }
    ]
};

                // 为echarts对象加载数据
                myChart.setOption(option);
            }
        );
    </script>
		</div>
		<div style="width:400px;float:left;margin:30px;display:inline;">
			
		 <a class="myButton" href="/cleanallmore" role="button" >所有记录</a>
		<div style="height:500px; margin:10px 0;overflow:scroll;overflow-y:auto;overflow-x:hidden;">
			<table class="bordered">
            <thead id="head">
			<tr>
                <th>班级</th>
                <th>优率</th>
				<th>良率</th>
				<th>中率</th>
				<th>差率</th>

            </tr>

            </thead>
            <tbody id="body">

            </tbody>
        </table>
         </div>
		</div>
	</div>
</div>
</div>
</div>
	</div>
</body>
<script>


$$(function(){

    $$('.nav-item>a').on('click',function(){
        if (!$$('.nav').hasClass('nav-mini')) {
            if ($$(this).next().css('display') == "none") {

                $$('.nav-item').children('ul').slideUp(300);
                $$(this).next('ul').slideDown(300);
                $$(this).parent('li').addClass('nav-show').siblings('li').removeClass('nav-show');
            }else{
                $$(this).next('ul').slideUp(300);
                $$('.nav-item.nav-show').removeClass('nav-show');
            }
        }
    });

    $$('#mini').on('click',function(){
        if (!$$('.nav').hasClass('nav-mini')) {
            $$('.nav-item.nav-show').removeClass('nav-show');
            $$('.nav-item').children('ul').removeAttr('style');
            $$('.nav').addClass('nav-mini');
        }else{
            $$('.nav').removeClass('nav-mini');
        }
    });
});

</script>
</html>